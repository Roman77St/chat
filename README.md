# Secret P2P Chat

–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –Ω–∞ Go, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É ¬´—Å–ª–µ–ø–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞¬ª. –°–µ—Ä–≤–µ—Ä –≤—ã—Å—Ç—É–ø–∞–µ—Ç –ª–∏—à—å –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–º –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –±–∞–π—Ç–æ–≤, –Ω–µ –∏–º–µ—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É –∫–æ–º–Ω–∞—Ç –∏–ª–∏ –∫–ª—é—á–∞–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è.
### üõ° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

* **Ephemeral TLS**: –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (RAM) –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞. –ó–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–∞—Å–∞–µ—Ç—Å—è –¥–∏—Å–∫–∞, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω—É—é —Ñ–æ—Ä–≤–∞—Ä–¥–Ω—É—é —Å–µ–∫—Ä–µ—Ç–Ω–æ—Å—Ç—å (PFS).

* **Room Hashing**: RoomID ‚Äî —ç—Ç–æ SHA-256 —Ö–µ—à –æ—Ç –ø–∞—Ä–æ–ª—è –∫–æ–º–Ω–∞—Ç—ã. –í–ª–∞–¥–µ–ª–µ—Ü —Å–µ—Ä–≤–µ—Ä–∞ –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ ID, –Ω–æ –Ω–µ –∑–Ω–∞–µ—Ç –ø–∞—Ä–æ–ª—å, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è –≤—Ö–æ–¥–∞.

* **End-to-End Encryption (E2EE**)**: –°–æ–æ–±—â–µ–Ω–∏—è —à–∏—Ñ—Ä—É—é—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ —Å –ø–æ–º–æ—â—å—é AES-GCM. –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π ¬´–º—É—Å–æ—Ä¬ª.

* **Rate Limiting**: –ó–∞—â–∏—Ç–∞ –æ—Ç DoS-–∞—Ç–∞–∫ –ø—É—Ç–µ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å –æ–¥–Ω–æ–≥–æ IP-–∞–¥—Ä–µ—Å–∞ (–ª–∏–º–∏—Ç: 3).

* **Auto-Cleanup**: –ö–æ–º–Ω–∞—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –ø–∞–º—è—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞, –µ—Å–ª–∏ –≤—Ç–æ—Ä–æ–π —É—á–∞—Å—Ç–Ω–∏–∫ –Ω–µ –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Go 1.20 –∏–ª–∏ –≤—ã—à–µ

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

–°–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞—Å—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π TLS-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ –Ω–∞—á–Ω–µ—Ç —Å–ª—É—à–∞—Ç—å –ø–æ—Ä—Ç.

`Bash`
```
go run cmd/server/main.go
```

### 2. –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–ª–∏–µ–Ω—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:

`Bash`
```
go run cmd/client/main.go
```

1. –ê–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞: –ù–∞–ø—Ä–∏–º–µ—Ä, localhost:8080.

2. ID –∫–æ–º–Ω–∞—Ç—ã: –ü–∞—Ä–æ–ª—å, –ø–æ —Ö–µ—à—É –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä –Ω–∞–π–¥–µ—Ç –≤–∞—à–µ–≥–æ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞.

3. –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è: –°–µ–∫—Ä–µ—Ç–Ω–∞—è —Ñ—Ä–∞–∑–∞ (E2EE), –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è AES-GCM (—Å–µ—Ä–≤–µ—Ä –µ—ë –Ω–µ –≤–∏–¥–∏—Ç).

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

* Transport: TCP + TLS (Ed25519 certificates).

* Encryption: AES-256-GCM.

* Identity: SHA-256 (Room Hashing).

* Concurrency: Go routines + sync.RWMutex.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

* `cmd/` ‚Äî —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞.

* `internal/server/` ‚Äî –ª–æ–≥–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–Ω–∞—Ç–∞–º–∏, Rate Limiting –∏ TLS.

* `internal/client/` ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è.

* `pkg/protocol/` ‚Äî –æ–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏/—á—Ç–µ–Ω–∏—è RoomID –∏ —Å–ª—É–∂–µ–±–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤.

## ‚ö†Ô∏è –î–∏—Å–∫–ª–µ–π–º–µ—Ä

–ü–æ—Å–∫–æ–ª—å–∫—É —Å–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –≤ RAM, –∫–ª–∏–µ–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ InsecureSkipVerify: true. –≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤ –¥–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, —Ç–∞–∫ –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ª–æ–π –∑–∞—â–∏—Ç—ã ‚Äî —ç—Ç–æ E2EE –≤–Ω—É—Ç—Ä–∏ TLS-—Ç—É–Ω–Ω–µ–ª—è.

# TODO:
* File Transfer: –ü–µ—Ä–µ–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ —Ç–æ—Ç –∂–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª.
* DH Key Exchange: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ –ø–∞—Ä–æ–ª—è –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É –î–∏—Ñ—Ñ–∏-–•–µ–ª–ª—å–∞–Ω–∞.

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!